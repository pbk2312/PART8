*깃허브 업로드를 원작자에게 승인받았습니다.*


# PART 8.1 스프링 시큐리티
-----
스프링 시큐리티 관련 라이브러리: `implementation 'org.springframework.boot:spring-boot-starter-security’`

미리 말하자면 스프링 시큐리티의 동작은 웹에서 사용하는 필터(Filter)를 통해서 동작하고 상당히 많은 수의 필터들이 단계별로 동작하게 됩니다.따라서 문제가 발생하면 어떤 필터에서 어떤 문제가 생겼는지 알 수 있도록 application.properties의 로그 설정을 최대한 낮게 설정해서 관련된 에러를 볼 수 있도록 설정하는 것이 좋습니다.



## 인증과 인가/권한
스프링 시큐리티 전체를 관통하는 가장 중요한 개념은 인증(Authentication)과 인가(Authorization)라는 개념입니다.

+ **인증(Authentication)**:’스스로를 증명하다’라는 뜻이며 흔히 말하는 로그인 개념입니다.인증을 위해서 사용자는 자신이 알고 있는 자신의 정보를 제공하는데 아이디와 패스워드가 이에 속합니다.

+ **인가(Authorization)**:’허가나 권한’이라는 개념과 같습니다.인증이 된 사용자라고 해도 이에 접근 할 수 있는권한이 있는지를 확인하는 과정을 의미합니다.

 웹 애플리케이션에서 스프링 시큐리티를 적용하면 로그인을 통해서 ‘인증’을 수행하고 컨트롤러의 경로에 시큐리티 설정으로 특정한 권한이 있는 사용자들만 접근할 수 있도록 설정하게 됩니다.




 ## 인증(Authentication)과 username

 스프링 시큐리티에서 로그인에 해당하는 인증 단계는 과거의 웹과 다르게 동작하는 부분이 있으므로 주의해야합니다.인증 처리는 다음과 같은 단계를 거쳐 동작하게 됩니다.

 + 사용자의 **아이디(username)만으로** 사용자의 정보를 로딩(흔히 아이디라고 하는 존재는 스프링 시큐리티에서는 username이라는 용어를 쓰므로 주의해야합니다)
 + 로딩된 사용자의 정보를 이용해서 패스워드를 검증


스프링 시큐리티의 동작 방식은 웹에서 로그인 처리로 아이디와 패스워드를 한번에 조회하는 방식과 달리 **아이디(username)**만을 이용해서 사용자 정보를 로딩하고 나중에 패스워드를 검증하는 방식입니다.

인증 처리는 ‘인증 제공자(Authentication Provider)’라는 존재를 이용해서 처리되는데 인증 제공자와 그 이하의 흐름은 일반적으로 커스터마이징해야 하는 경우가 거의 없으므로 실제 인증 처리를 담당하는 객체만을 커스터마이징하는 경우가 대부분입니다.




## 인증 처리를 위한 UserDetailService

스프링 시큐리티에서 가장 중요한 객체는 실제로 인증을 처리하는 UserDetailsService라는 인터페이스의 구현체입니다.UserDetailsService 인터페이스는 loadUserByUsername()이라는 단 하나의 메소드를 가지는데 이것이 실제 인증을 처리할 때 호출되는 부분입니다.실제 개발 작업은 UserDetailsService 인터페이스를 구현해서 username이라고 부르는 사용자의 아이디 인증을 코드로 구현하는 것입니다.
